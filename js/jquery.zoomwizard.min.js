(function(c){function H(a,b,e){for(var c=[],i,d=a.length,f=0;f<a.length;f++)i=new Image,c.push(i),i.onload=function(){--d;0==d&&b(e)},i.src=a[f];return c}var n=0,u;new Image;new Image;var f,g,v,k,l,w,x,o,m,h,y,z,A,B,C=!1,q=!1,F=!1,j,I,t,J,K,G,p,D,r,E=!1,s,d={init:function(a){"window"==a.settings.mode?(d.setupHTML({el:a.target,settings:a.settings}),d.setupStyles({el:a.target,settings:a.settings}),d.setupEvents({settings:a.settings})):"inner"==a.settings.mode?(d.setupHTMLInner({el:a.target,settings:a.settings}),
d.setupStylesInner({settings:a.settings}),d.setupEventsInner({settings:a.settings})):"controls"==a.settings.mode&&(d.setupHTMLControls({el:a.target,settings:a.settings}),d.setupStylesControls({settings:a.settings}),d.setupEventsControls({settings:a.settings}))},setupHTML:function(a){var b=a.el,a=a.settings,e=b.next(),d=e.hasClass("zoomwizard-large")?'<img class="zoomwizard zoomwizard-large" src="'+e.attr("src")+'" alt="'+e.attr("alt")+'">':'<img class="zoomwizard zoomwizard-large" src="'+b.attr("src")+
'" alt="'+b.attr("alt")+'">',i='<div class="zoomwizard-wrap zoomwizard-node zoomwizard-wrap-window" id="zoomwizard-wrap-'+n+'">',i=i+'\t<div class="zoomwizard-active-area"></div>'+('\t\t<img class="zoomwizard zoomwizard-thumb" src="'+b.attr("src")+'" alt="'+b.attr("alt")+'">'),i=i+('\t\t<div class="zoomwizard-window zoomwizard-windowstyle-'+a.windowstyle+'">');3==a.windowstyle&&(i+='\t\t\t<div class="zoomwizard-window-inner"></div>');i=i+d+"\t\t</div></div>";b.parent();b.before(i).remove();m=c("#zoomwizard-wrap-"+
n);e.remove();n++;m.data({zoom:a.zoom,margin:a.margin})},setupStyles:function(a){var a=a.settings,b=m,e=b.find("img").first().width(),c=b.find("img").first().height();x=b.find(".zoomwizard-window");o=x.find("img");b.find(".zoomwizard-active-area").css({width:e,height:c});b.css({width:e,height:c});x.css({width:a.width,height:a.height,left:-a.width/2,top:-a.height/2,"border-radius":a.radius,border:a.border});o.css({width:e*a.zoom,height:c*a.zoom});b.find("img").css({margin:0,"float":"none"});a.hidecursor&&
(b.find(".zoomwizard-window").css({cursor:"none"}),b.find(".zoomwizard-active-area").css({cursor:"none"}))},setupEvents:function(a){var b=a.settings;c(".zoomwizard-wrap-window").unbind(".zoomwizard");c(document).unbind(".zoomwizard");c(".zoomwizard-wrap-window").on("mouseover.zoomwizard",function(){u=c(this).data("zoom");m.data({windowmove:!0});E=!0;s=c(this);x=s.find(".zoomwizard-window");v=b.width;w=b.height});c(document).on("mousemove.zoomwizard",function(a){E&&(s.hasClass("init")||d.initHoverState({wrapper:s,
settings:b}),x.css({left:a.pageX-f-v/2,top:a.pageY-g-w/2,display:"block"}),o.css({left:-((a.pageX-f)*u-v/2),top:-((a.pageY-g)*u-w/2)}));E&&!d.isWithinArea({ev:a,area:s})&&(s.removeClass("init"),E=!1,s.find(".zoomwizard-window").hide())})},initHoverState:function(a){a=a.wrapper;a.addClass("init");h=a.find(".zoomwizard-thumb");o=a.find(".zoomwizard-large");k=h.width();l=h.height();o.css({width:k*u,height:l*u}).show();f=h.offset().left;g=h.offset().top},setupHTMLControls:function(a){var b=a.el,a=a.settings;
b.parent().find(".zoomwizard-large").remove();var e='<div class="zoomwizard-wrap zoomwizard-wrap-controls" id="zoomwizard-wrap-'+n+'">',e=e+('\t<div class="zoomwizard-controls-wrap zoomwizard-style-'+a.controlstyle+'">');!0==a.slider&&(e+='\t\t<div class="zoomwizard-controls-block zoomwizard-controls-block-slider">\t\t\t<div class="zoomwizard-slidebar">\t\t\t\t<div class="zoomwizard-slidebar-skin"></div>\t\t\t\t<div class="zoomwizard-slider"></div>\t\t\t</div>\t\t</div>');!0==a.movegizmo&&(e+='\t\t<div class="zoomwizard-controls-block">\t\t\t<div class="zoomwizard-moveup zoomwizard-button"></div>\t\t\t<div class="zoomwizard-movedown zoomwizard-button"></div>\t\t\t<div class="zoomwizard-moveleft zoomwizard-button"></div>\t\t\t<div class="zoomwizard-moveright zoomwizard-button"></div>\t\t</div>');
!0==a.zoombuttons&&(e+='\t\t<div class="zoomwizard-controls-block zoomwizard-controls-block-zoom">\t\t\t<div class="zoomwizard-plus zoomwizard-button"></div>\t\t\t<div class="zoomwizard-minus zoomwizard-button"></div>\t\t</div>');e=e+"\t</div>"+('\t<img class="'+b.attr("class")+' zoomwizard-img" src="'+b.attr("src")+'" alt="'+b.attr("alt")+'">');b.before(e+"</div>").remove();m=c("#zoomwizard-wrap-"+n);n++},setupStylesControls:function(a){var a=a.settings,b=m,e=b.find(".zoomwizard-img");b.css({overflow:"hidden",
width:e.width(),height:e.height()});e.css({position:"absolute","z-index":9998,left:0,top:0,cursor:"move"});a.autohide&&b.find(".zoomwizard-controls-wrap").hide();b.find(".zoomwizard-button");b.find(".zoomwizard-slider").css({top:b.find(".zoomwizard-slidebar").height()})},setupEventsControls:function(a){var b=a.settings;c(".zoomwizard-wrap-controls").unbind(".zoomwizard");c(".zoomwizard-wrap-controls").find("img").each(function(){D=c(this).closest(".zoomwizard-wrap").find(".zoomwizard-slidebar");c(this).data({zoom:1,
width:c(this).width(),height:c(this).height(),"factor-left":1,"factor-top":1,zoomfactor:D.height()/(b.zoom-1),"offset-left":0,"offset-top":0})});c(".zoomwizard-wrap-controls").mousewheel(function(a,f){var i=c(this).find("img");i.data({zoom:d.lim.call(this,{val:i.data("zoom")+0.1*f,min:1,max:parseInt(b.zoom)})});d.zoomImg({target:i,settings:b});d.updateSliderPosition({img:i,animated:b.animated});return!1});c(".zoomwizard-wrap-controls").on("mousedown.zoomwizard",function(a){j=c(this).find("img");1!=
j.data("zoom")&&(C=!0,I=a.pageX,t=a.pageY,J=j.position().left,K=j.position().top,v=j.closest(".zoomwizard-wrap").width(),w=j.closest(".zoomwizard-wrap").height());return!1});c(".zoomwizard-wrap-controls").on("mousemove.zoomwizard",function(a){c(this).find(".zoomwizard-controls-wrap").fadeIn(200);C&&!q&&(f=d.lim.call(this,{val:J+(a.pageX-I),min:-j.width()+v,max:0}),g=d.lim.call(this,{val:K+(a.pageY-t),min:-j.height()+w,max:0}),j.css({left:f,top:g}),j.data({"factor-left":2*-f/(j.width()-j.data("width"))}),
j.data({"factor-top":2*-g/(j.height()-j.data("height"))}));q&&(F=!0,p.css({top:d.lim.call(this,{val:G+(a.pageY-t),min:0,max:D.height()})}),r.data({zoom:1+(D.height()-p.position().top)/r.data("zoomfactor")}),d.zoomImg({target:r,settings:b}));return!1});c(".zoomwizard-wrap-controls").on("mouseup.zoomwizard",function(){F=q=C=!1});if(b.autohide)c(".zoomwizard-wrap-controls").on("mouseout.zoomwizard",function(a){d.isWithinArea.call(this,{ev:a,area:c(".zoomwizard-wrap")})||c(this).find(".zoomwizard-controls-wrap").fadeOut(200)});
c(document).on("mouseup.zoomwizard",function(){C=q=!1});if(!0==b.movegizmo)m.find(".zoomwizard-button").on("click.zoomwizard",function(){var a=c(this).closest(".zoomwizard-wrap").find("img");c(this).hasClass("zoomwizard-moveup")?d.moveImg.call(this,{target:a,directionLeft:0,directionTop:1,settings:b}):c(this).hasClass("zoomwizard-movedown")?d.moveImg.call(this,{target:a,directionLeft:0,directionTop:-1,settings:b}):c(this).hasClass("zoomwizard-moveleft")?d.moveImg.call(this,{target:a,directionLeft:1,
directionTop:0,settings:b}):c(this).hasClass("zoomwizard-moveright")&&d.moveImg.call(this,{target:a,directionLeft:-1,directionTop:0,settings:b})});if(!0==b.zoombuttons)m.find(".zoomwizard-button").on("click.zoomwizard",function(){var a=c(this).closest(".zoomwizard-wrap").find("img");c(this).hasClass("zoomwizard-plus")?(a.data({zoom:1.33*a.data("zoom")}),1.33*a.data("zoom")<b.zoom?a.data({zoom:1.33*a.data("zoom")}):a.data({zoom:b.zoom}),d.zoomImg({target:a,settings:b})):c(this).hasClass("zoomwizard-minus")&&
(a.data({zoom:0.66*a.data("zoom")}),1<0.66*a.data("zoom")?a.data({zoom:0.66*a.data("zoom")}):a.data({zoom:1}),d.zoomImg({target:a,settings:b}));d.updateSliderPosition.call(this,{img:c(this).closest(".zoomwizard-wrap").find("img").first(),animated:b.animated})});!0==b.slider&&(m.find(".zoomwizard-slidebar").on("mousedown.zoomwizard",function(a){q=!0;t=a.pageY;p=c(this).find(".zoomwizard-slider");r=c(this).closest(".zoomwizard-wrap").find("img");p.css({top:t-p.parent().offset().top-p.height()/2});q&&
(r.data({zoom:1+(D.height()-p.position().top+5)/r.data("zoomfactor")}),d.zoomImg({target:r,settings:b}));G=p.position().top;return!1}),m.find(".zoomwizard-slider").on("mousedown.zoomwizard",function(a){q=!0;t=a.pageY;p=c(this);r=c(this).closest(".zoomwizard-wrap").find("img");G=p.position().top;return!1}),m.find(".zoomwizard-slider").on("mouseup.zoomwizard",function(){C=q=!1}))},updateSliderPosition:function(a){var b=a.img,a=a.animated,c=b.siblings(".zoomwizard-controls-wrap").find(".zoomwizard-slider");
a?c.stop().animate({top:c.parent().height()+b.data("zoomfactor")*(1-b.data("zoom"))},200):c.css({top:c.parent().height()+b.data("zoomfactor")*(1-b.data("zoom"))})},setupHTMLInner:function(a){var a=a.el,b=a.next();if(b.hasClass("zoomwizard-large"))var e='<div class="zoomwizard-inner-wrap" id="zoomwizard-wrap-'+n+'">',e=e+'\t<div class="zoomwizard-inner-active-area"></div>'+('\t<img class="'+a.attr("class")+' zoomwizard-thumb" src="'+a.attr("src")+'" alt="'+a.attr("alt")+'">'),e=e+('\t<img class="'+
b.attr("class")+' zoomwizard-large" src="'+b.attr("src")+'" alt="'+b.attr("alt")+'">');else a.attr("class"),a.attr("src"),a.attr("alt"),e='<div class="zoomwizard-inner-wrap" id="zoomwizard-wrap-'+n+'">',e=e+'\t<div class="zoomwizard-inner-active-area"></div>'+('\t<img class="'+a.attr("class")+' zoomwizard-thumb zoomwizard-large" src="'+a.attr("src")+'" alt="'+a.attr("alt")+'">');a.before(e+"</div>").remove();b.remove();m=c("#zoomwizard-wrap-"+n);n++},setupStylesInner:function(a){var a=a.settings,
b=m;h=b.find(".zoomwizard-thumb");b.css({overflow:"hidden",position:"relative",width:h.width(),height:h.height(),background:"red"});h.css({position:"absolute",left:0,top:0});h.prev().css({width:h.width()-2*a.margin,height:h.height()-2*a.margin,position:"absolute","z-index":9999,left:a.margin,top:a.margin});b.find(".zoomwizard-large").css({position:"absolute","z-index":9998,left:0,top:0})},setupEventsInner:function(a){var b=a.settings;c(".zoomwizard-inner-wrap").unbind(".zoomwizard");c(".zoomwizard-inner-wrap").on("mousemove.zoomwizard",
function(a){var h=c(this);h.hasClass("init")||d.initHoverStateInner({wrapper:h,settings:b});0==b.margin?o.css({left:-((a.pageX-f)*factorX),top:-((a.pageY-g)*factorY)}):(y=a.pageX-f-b.margin,y=0>y?0:y,z=a.pageY-g-b.margin,z=0>z?0:z,A=-y*factorX,A=-A>k*b.zoom-k?-(k*b.zoom-k):A,B=-z*factorY,B=-B>l*b.zoom-l?-(l*b.zoom-l):B,o.css({left:A,top:B}))});c(".zoomwizard-inner-wrap").on("mouseout.zoomwizard",function(){c(this).removeClass("init");h.css({left:0,top:0,width:k,height:l});o.hide()})},initHoverStateInner:function(a){var b=
a.wrapper,a=a.settings;b.addClass("init");h=b.find(".zoomwizard-thumb");o=b.find(".zoomwizard-large");k=h.width();l=h.height();o.css({width:k*a.zoom,height:l*a.zoom}).show();0==a.margin?(f=h.offset().left+a.margin,g=h.offset().top+a.margin,factorX=3*(k*a.zoom-k)/(k*a.zoom),factorY=3*(l*a.zoom-l)/(l*a.zoom)):(f=h.offset().left,g=h.offset().top,factorX=(a.zoom-1)*(k/(k-2*a.margin)),factorY=(a.zoom-1)*(l/(l-2*a.margin)))},zoomImg:function(a){var b=a.settings,a=a.target;f=-(a.data("width")*a.data("zoom")-
a.data("width"))/2;f*=a.data("factor-left");g=-(a.data("height")*a.data("zoom")-a.data("height"))/2;g*=a.data("factor-top");b.animated&&!F?a.stop().animate({width:a.data("width")*a.data("zoom"),height:a.data("height")*a.data("zoom"),left:f,top:g},200):a.css({width:a.data("width")*a.data("zoom"),height:a.data("height")*a.data("zoom"),left:f,top:g});1==a.data("zoom")&&(a.data({"factor-left":1}),a.data({"factor-top":1}))},moveImg:function(a){var b=a.target,c=a.directionLeft,d=a.directionTop,a=a.settings;
1<b.data("zoom")&&0!=c?(f=b.position().left+b.data("width")/6*c,f=0<f?0:f,f=f<b.closest(".zoomwizard-wrap").width()-b.width()?b.closest(".zoomwizard-wrap").width()-b.width():f):1<b.data("zoom")&&0!=d&&(g=b.position().top+b.data("height")/6*d,g=0<g?0:g,g=g<b.closest(".zoomwizard-wrap").height()-b.height()?b.closest(".zoomwizard-wrap").height()-b.height():g);1<b.data("zoom")&&(b.data({"offset-left":f,"offset-top":g}),b.data({"factor-left":2*-f/(b.width()-b.data("width"))}),b.data({"factor-top":2*-g/
(b.height()-b.data("height"))}),a.animated?b.animate({left:f,top:g},200):b.css({left:f,top:g}))},lim:function(a){a.val<a.min?a.val=a.min:a.val>a.max&&(a.val=a.max);return a.val},isWithinArea:function(a){return a.ev.pageX<a.area.offset().left+a.area.width()&&a.ev.pageX>a.area.offset().left&&a.ev.pageY<a.area.offset().top+a.area.height()&&a.ev.pageY>a.area.offset().top?!0:!1}};c.fn.extend({zoomwizard:function(a){var b=c.extend({mode:"window",movegizmo:!0,slider:!0,zoombuttons:!0,animated:!1,width:250,
height:250,zoom:4,margin:20,autohide:!1,hidecursor:!0,controlstyle:1,windowstyle:2},a);return this.each(function(){c(".zoomwizard-large").hide();c(this).next().hasClass("zoomwizard-large")?H([c(this).attr("src"),c(this).next().attr("src")],d.init,{target:c(this),settings:b}):H([c(this).attr("src")],d.init,{target:c(this),settings:b})})}});(function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0,b=a.event.fix(c);b.type="mousewheel";c.wheelDelta&&(e=c.wheelDelta/120);
c.detail&&(e=-c.detail/3);g=e;void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e);void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120);void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120);d.unshift(b,e,f,g);return(a.event.dispatch||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=c.length;d;)a.event.fixHooks[c[--d]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],
b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery)})(jQuery);